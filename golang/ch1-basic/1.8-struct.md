* 声明
* 匿名字段（也称嵌入字段）
* Tag
* 方法
    * 接收者
* 结构体是值传递

---

## 1.8 Struct & method

### 声明

```
type person struce {
    name string
    age int
}

// 方式 1：
var p person

// 方式 2：按照顺序提供初始化值，这种方式要求所有的字段都必须赋值
var p1 = person{"abc", 2}

// 方式 3：使用 field:value 的方式初始化，可以任意顺序
var p2 = person{name: "sdf", age: 2}

// 方式 4：使用 new 函数分配一个指针， p 为 *person 类型
var p = new(person)
```


### 匿名字段（也称嵌入字段）

Go 语言支持直接将类型作为结构体的字段，而不需要加上变量名，这种字段叫匿名字段。

### Tag

在定义结构体字段时，除字段名称和数据类型外，还可以使用反引号为结构体字段声明元信息，这种元信息称为Tag。

Tag由反引号括起来的一系列用空格分隔的 `key:"value"` 键值对组成，如：

```
Id int `json:"id" gorm:"AUTO_INCREMENT"`
```

### 方法

注意，并不是只有结构体才能绑定方法，任何类型都可以绑定方法，只是我们这里介绍将方法绑定到结构体中。

结构体是值传递，当我们调用结构体的 method 时，method receiver 接收到是只是结构体变量的一个副本。所以如果需要在 method 中修改结构体，记得需要传递指针。

#### 接收者

method 的接收者可以是值或者指针，而且值和指针可以随意改变，对调用方式没有影响，只是对调用后的结果可能造成不同的影响。
“值/指针接收者均可接收值/指针”

* 值类型调用值接收者：直接用  
* 值类型调用指针接收者：会先取地址，然后再调用  
* 指针类型调用值接收者：会先取值，然后再调用  
* 指针类型调用指针接收者：直接用  

#### xx

为 struct 定义的方法必须放在同一个包里，可以是不同的文件

#### xx

一个 nil 是可以调用方法的，不会 crash ，但是需要在方法内部处理为 nil 的情况。但是 Java 不一样，null 调用方法就直接 crash 了

## 结构体是值传递

结构体与数组一样，都是值传递

结构体不能包含自己。一个结构体，不能包含自身，比如 Member 中的字段不能是 Member 类型，但却可以是 *Member。
